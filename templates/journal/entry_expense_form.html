{% extends 'base.html' %}
{% load static %}

{% block title %}Record Expense â€” Pure Herb{% endblock %}

{% block content %}
<article class="form-hero form-hero--expense">
  <div class="form-hero__strip">
    <div class="form-hero__icon" aria-hidden="true">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
        <polyline points="14 2 14 8 20 8"/>
        <line x1="16" y1="13" x2="8" y2="13"/>
        <line x1="16" y1="17" x2="8" y2="17"/>
        <polyline points="10 9 9 9 8 9"/>
      </svg>
    </div>
    <div class="form-hero__text">
      <h1 class="form-hero__title">Record Expense</h1>
      <p class="form-hero__subtitle">Track your outflows for better insights</p>
    </div>
  </div>

  <form method="post" novalidate class="form-card form-card--expense">
    {% csrf_token %}

    <div class="form-card__body">
      <section class="form-section form-section--primary">
        <h2 class="form-section__title">Transaction details</h2>
        <div class="form-row form-row--2">
          <div class="form-field">
            <label for="id_date" class="form-field__label">Date</label>
            <div class="form-field__input-wrap date-input-wrap">
              <span class="form-field__icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/></svg>
              </span>
              <input type="text" name="date" id="id_date" value="{{ form.date.value|default:'' }}" required class="form-field__input flatpickr-date" placeholder="Select date" autocomplete="off">
            </div>
            {% if form.date.errors %}<ul class="form-errors">{% for error in form.date.errors %}<li>{{ error }}</li>{% endfor %}</ul>{% endif %}
          </div>
          <div class="form-field form-field--amount">
            <label for="id_amount" class="form-field__label">Amount</label>
            <div class="amount-input">
              <span class="amount-input__currency">AED</span>
              <input type="number" name="amount" id="id_amount" step="0.01" min="0" placeholder="0.00" value="{{ form.amount.value|default:'' }}" required class="amount-input__field" autocomplete="off" inputmode="decimal">
            </div>
            {% if form.amount.errors %}<ul class="form-errors">{% for error in form.amount.errors %}<li>{{ error }}</li>{% endfor %}</ul>{% endif %}
          </div>
        </div>

        <div class="form-field form-field--payment">
          <span class="form-field__label">Payment method</span>
          <fieldset class="payment-cards" role="group" aria-label="Payment method">
            <label class="payment-card">
              <input type="radio" name="payment_method" value="cash" {% if form.payment_method.value == 'cash' or not form.payment_method.value %}checked{% endif %}>
              <span class="payment-card__content">
                <span class="payment-card__icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="1" y="4" width="22" height="16" rx="2"/><path d="M1 10h22"/></svg>
                </span>
                <span class="payment-card__label">Cash</span>
              </span>
            </label>
            <label class="payment-card">
              <input type="radio" name="payment_method" value="card" {% if form.payment_method.value == 'card' %}checked{% endif %}>
              <span class="payment-card__content">
                <span class="payment-card__icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="1" y="4" width="22" height="16" rx="2"/><path d="M1 10h22"/><path d="M5 16h4"/></svg>
                </span>
                <span class="payment-card__label">Card</span>
              </span>
            </label>
          </fieldset>
        </div>

        <div class="form-row form-row--2">
          <div class="form-field">
            <label for="id_category" class="form-field__label">Category</label>
            <div class="form-field__input-wrap">
              <span class="form-field__icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>
              </span>
              <input type="text" name="category" id="id_category" placeholder="e.g. Supplies, Rent, Utilities" value="{{ form.category.value|default:'' }}" required class="form-field__input" list="category-suggestions" autocomplete="off">
              <datalist id="category-suggestions">
                <option value="Supplies"><option value="Rent"><option value="Utilities"><option value="Inventory"><option value="Marketing"><option value="Payroll"><option value="Shipping"><option value="Other">
              </datalist>
            </div>
            {% if form.category.errors %}<ul class="form-errors">{% for error in form.category.errors %}<li>{{ error }}</li>{% endfor %}</ul>{% endif %}
          </div>
          <div class="form-field form-field--optional">
            <label for="id_reference" class="form-field__label">Reference <span class="form-field__optional">optional</span></label>
            <div class="form-field__input-wrap">
              <input type="text" name="reference" id="id_reference" placeholder="e.g. BILL-001" value="{{ form.reference.value|default:'' }}" class="form-field__input">
            </div>
            {% if form.reference.errors %}<ul class="form-errors">{% for error in form.reference.errors %}<li>{{ error }}</li>{% endfor %}</ul>{% endif %}
          </div>
        </div>
      </section>

      <section class="form-section">
        <h2 class="form-section__title">Description</h2>
        <div class="form-field">
          <label for="id_description" class="form-field__label">What was this expense for?</label>
          <div class="form-field__input-wrap">
            <textarea name="description" id="id_description" rows="3" placeholder="e.g. Bulk order of dried herbs from supplier..." required class="form-field__input form-field__textarea">{{ form.description.value|default:'' }}</textarea>
          </div>
          {% if form.description.errors %}<ul class="form-errors">{% for error in form.description.errors %}<li>{{ error }}</li>{% endfor %}</ul>{% endif %}
        </div>
      </section>
    </div>

    <footer class="form-card__footer">
      <a href="{% url 'journal:home' %}" class="btn btn-ghost">Cancel</a>
      <button type="submit" class="btn btn-primary btn--submit btn--expense">
        <span class="btn__icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
        </span>
        Record Expense
      </button>
    </footer>
  </form>
</article>
{% endblock %}
