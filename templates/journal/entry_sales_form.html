{% extends 'base.html' %}
{% load static %}

{% block title %}Record Sale — Pure Herb{% endblock %}

{% block content %}
<article class="form-hero form-hero--sales">
  <div class="form-hero__strip">
    <div class="form-hero__icon" aria-hidden="true">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
      </svg>
    </div>
    <div class="form-hero__text">
      <h1 class="form-hero__title">Record Sale</h1>
      <p class="form-hero__subtitle">Capture your revenue — cash or card</p>
    </div>
  </div>

  <form method="post" novalidate class="form-card form-card--sales">
    {% csrf_token %}

    <div class="form-card__body">
      <section class="form-section form-section--primary">
        <h2 class="form-section__title">Transaction details</h2>
        <div class="form-row form-row--2">
          <div class="form-field">
            <label for="id_date" class="form-field__label">Date</label>
            <div class="form-field__input-wrap date-input-wrap">
              <span class="form-field__icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/></svg>
              </span>
              <input type="text" name="date" id="id_date" value="{{ form.date.value|default:'' }}" required class="form-field__input flatpickr-date" placeholder="Select date" autocomplete="off">
            </div>
            {% if form.date.errors %}<ul class="form-errors">{% for error in form.date.errors %}<li>{{ error }}</li>{% endfor %}</ul>{% endif %}
          </div>
          <div class="form-field form-field--amount">
            <label for="id_amount" class="form-field__label">Amount</label>
            <div class="amount-input">
              <span class="amount-input__currency">AED</span>
              <input type="number" name="amount" id="id_amount" step="0.01" min="0" placeholder="0.00" value="{{ form.amount.value|default:'' }}" required class="amount-input__field" autocomplete="off" inputmode="decimal">
            </div>
            {% if form.amount.errors %}<ul class="form-errors">{% for error in form.amount.errors %}<li>{{ error }}</li>{% endfor %}</ul>{% endif %}
          </div>
        </div>

        <div class="form-field form-field--payment">
          <span class="form-field__label">Payment method</span>
          <fieldset class="payment-cards" role="group" aria-label="Payment method">
            <label class="payment-card">
              <input type="radio" name="payment_method" value="cash" {% if form.payment_method.value == 'cash' or not form.payment_method.value %}checked{% endif %}>
              <span class="payment-card__content">
                <span class="payment-card__icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="1" y="4" width="22" height="16" rx="2"/><path d="M1 10h22"/></svg>
                </span>
                <span class="payment-card__label">Cash</span>
              </span>
            </label>
            <label class="payment-card">
              <input type="radio" name="payment_method" value="card" {% if form.payment_method.value == 'card' %}checked{% endif %}>
              <span class="payment-card__content">
                <span class="payment-card__icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="1" y="4" width="22" height="16" rx="2"/><path d="M1 10h22"/><path d="M5 16h4"/></svg>
                </span>
                <span class="payment-card__label">Card</span>
              </span>
            </label>
          </fieldset>
        </div>
      </section>

      <section class="form-section">
        <h2 class="form-section__title">Description</h2>
        <div class="form-field">
          <label for="id_description" class="form-field__label">What was sold?</label>
          <div class="form-field__input-wrap">
            <textarea name="description" id="id_description" rows="3" placeholder="e.g. Herbal tea blend, 3 units · Lavender sachets..." required class="form-field__input form-field__textarea">{{ form.description.value|default:'' }}</textarea>
          </div>
          {% if form.description.errors %}<ul class="form-errors">{% for error in form.description.errors %}<li>{{ error }}</li>{% endfor %}</ul>{% endif %}
        </div>
        <div class="form-field form-field--optional">
          <label for="id_reference" class="form-field__label">Reference <span class="form-field__optional">optional</span></label>
          <div class="form-field__input-wrap">
            <input type="text" name="reference" id="id_reference" placeholder="e.g. INV-001" value="{{ form.reference.value|default:'' }}" class="form-field__input">
          </div>
          {% if form.reference.errors %}<ul class="form-errors">{% for error in form.reference.errors %}<li>{{ error }}</li>{% endfor %}</ul>{% endif %}
        </div>
      </section>
    </div>

    <footer class="form-card__footer">
      <a href="{% url 'journal:home' %}" class="btn btn-ghost">Cancel</a>
      <button type="submit" class="btn btn-primary btn--submit">
        <span class="btn__icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
        </span>
        Record Sale
      </button>
    </footer>
  </form>
</article>
{% endblock %}
